{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/badge/style\";\nimport _Badge from \"antd/es/badge\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/checkbox/style\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport \"antd/es/divider/style\";\nimport _Divider from \"antd/es/divider\";\nimport \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nimport \"antd/es/steps/style\";\nimport _Steps from \"antd/es/steps\";\nvar _jsxFileName = \"C:\\\\Users\\\\Spyder\\\\Desktop\\\\pcr-system-clone\\\\frontend\\\\src\\\\views\\\\Client\\\\OccurrenceConfirm\\\\OccurrenceConfirm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport moment from \"moment\";\nimport \"moment/locale/ja\";\nimport styled from \"styled-components\";\nimport io from \"socket.io-client\";\nimport * as Commons from \"common/common\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nmoment.locale(\"ja\");\nconst {\n  Step\n} = _Steps;\nconst CustomSteps = styled(_Steps)`\n  .ant-steps-item-wait\n    > .ant-steps-item-container\n    > .ant-steps-item-content\n    > .ant-steps-item-title {\n    color: rgba(0, 0, 0, 0.2);\n  }\n  .ant-steps-item-wait\n    > .ant-steps-item-container\n    > .ant-steps-item-content\n    > .ant-steps-item-description {\n    color: rgba(0, 0, 0, 0.2);\n  }\n  .ant-steps-item-process\n    > .ant-steps-item-container\n    > .ant-steps-item-content\n    > .ant-steps-item-title {\n    color: #21acd7;\n    font-weight: bold;\n  }\n  .ant-steps-item-process\n    > .ant-steps-item-container\n    > .ant-steps-item-content\n    > .ant-steps-item-description {\n    color: #21acd7;\n    font-weight: bold;\n  }\n  .ant-steps-item-finish\n    > .ant-steps-item-container\n    > .ant-steps-item-content\n    > .ant-steps-item-title {\n    color: rgba(0, 0, 0, 0.6);\n    font-weight: bold;\n  }\n  .ant-steps-item-finish\n    > .ant-steps-item-container\n    > .ant-steps-item-content\n    > .ant-steps-item-description {\n    color: rgba(0, 0, 0, 0.6);\n    font-weight: bold;\n  }\n`;\n_c = CustomSteps;\nconst CustomStep = styled(Step)`\n  &::after {\n    display: none !important;\n  }\n  .ant-steps-item-icon {\n    display: none !important;\n  }\n`;\n_c2 = CustomStep;\nconst OccurrenceConfirm = props => {\n  _s();\n  const {\n    history,\n    showLoadingPageSpin,\n    hideLoadingPageSpin,\n    auth\n  } = props;\n  const {\n    occasionId,\n    occurrenceTime,\n    occurrenceDate,\n    occurrenceId\n  } = props.match.params;\n  const isMountedRef = Commons.useIsMountedRef();\n  const [currentOccasion, setCurrentOccasion] = useState({});\n  const [agreement, setAgreement] = useState(false);\n  const fetchOccasion = useCallback(() => {\n    showLoadingPageSpin();\n    Commons.axiosInstance.get(`${Commons.apiClientOccasions}/${occasionId}/details`).then(response => {\n      setCurrentOccasion((response === null || response === void 0 ? void 0 : response.data) || {});\n    }).catch(error => {\n      if (error.response.status === 403) {\n        _message.warning(Commons.errorSessionMsg);\n        history.push(Commons.GET_REDIRECT_LOGIN_ROUTE(auth));\n      } else if (error.response.status === 500) {\n        _message.error(Commons.errorSystemMsg);\n      } else {\n        _message.error(Commons.errorSystemMsg);\n      }\n    }).finally(() => {\n      hideLoadingPageSpin();\n    });\n  }, [showLoadingPageSpin, hideLoadingPageSpin, history, auth, occasionId]);\n  const fetchRegisteredOccasion = useCallback(() => {\n    showLoadingPageSpin();\n    Commons.axiosInstance.get(Commons.apiClientRegistrations).then(response => {\n      var _response$data;\n      if ((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.length) >= 2) {\n        history.push(`${Commons.clientRegisteredOccasionsRoute}`);\n      } else {\n        fetchOccasion();\n      }\n    }).catch(error => {\n      if (error.response.status === 403) {\n        _message.warning(Commons.errorSessionMsg);\n        history.push(Commons.GET_REDIRECT_LOGIN_ROUTE(auth));\n      } else if (error.response.status === 500) {\n        _message.error(Commons.errorSystemMsg);\n      } else {\n        _message.error(Commons.errorSystemMsg);\n      }\n    }).finally(() => {\n      hideLoadingPageSpin();\n    });\n\n    // eslint-disable-next-line\n  }, [showLoadingPageSpin, hideLoadingPageSpin, history, auth]);\n  const confirmHandler = () => {\n    var _currentOccasion$limi, _currentOccasion$limi2, _currentOccasion$limi3;\n    if (currentOccasion !== null && currentOccasion !== void 0 && currentOccasion.limitTime ? moment(occurrenceDate).subtract((_currentOccasion$limi = currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.limitDays) !== null && _currentOccasion$limi !== void 0 ? _currentOccasion$limi : 1, \"day\").hour((_currentOccasion$limi2 = currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.limitHours) !== null && _currentOccasion$limi2 !== void 0 ? _currentOccasion$limi2 : 18).minute((_currentOccasion$limi3 = currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.limitMinutes) !== null && _currentOccasion$limi3 !== void 0 ? _currentOccasion$limi3 : 0).second(0).isAfter(moment()) : true) {\n      if (agreement) {\n        showLoadingPageSpin();\n        const rParams = {\n          expected: 1,\n          occurrenceId: parseInt(occurrenceId)\n        };\n        Commons.axiosInstance.post(Commons.apiClientOccasions, rParams).then(response => {\n          history.push({\n            pathname: `${Commons.clientRegisteredOccasionsRoute}`,\n            state: {\n              fromConfirm: true\n            }\n          });\n        }).catch(error => {\n          if (error.response.status === 400) {\n            _Modal.info({\n              title: \"確認\",\n              content: Commons.warnSameDayReserveMsg,\n              okText: \"確認\",\n              okButtonProps: {\n                shape: \"round\"\n              },\n              centered: true,\n              onOk() {\n                history.go(-2);\n              }\n            });\n          } else if (error.response.status === 406) {\n            _Modal.info({\n              title: \"確認\",\n              content: Commons.warnNoAvailableSpaceMsg,\n              okText: \"確認\",\n              okButtonProps: {\n                shape: \"round\"\n              },\n              centered: true,\n              onOk() {\n                history.goBack();\n              }\n            });\n          } else if (error.response.status === 409) {\n            _Modal.info({\n              title: \"確認\",\n              content: Commons.warnRegistrationOverlapMsg,\n              okText: \"確認\",\n              okButtonProps: {\n                shape: \"round\"\n              },\n              centered: true\n            });\n          } else if (error.response.status === 500) {\n            _message.error(Commons.errorSystemMsg);\n          }\n        }).finally(() => {\n          if (isMountedRef.current) {\n            hideLoadingPageSpin();\n          }\n        });\n      } else {\n        _Modal.info({\n          title: \"確認\",\n          okText: \"確認\",\n          okButtonProps: {\n            shape: \"round\"\n          },\n          centered: true,\n          content: Commons.warnAgreementNotCheckedMsg\n        });\n      }\n    } else {\n      _Modal.info({\n        title: \"確認\",\n        content: Commons.warnNoAvailableSpaceMsg,\n        okText: \"確認\",\n        okButtonProps: {\n          shape: \"round\"\n        },\n        centered: true,\n        onOk() {\n          history.goBack();\n        }\n      });\n    }\n  };\n  useEffect(() => {\n    fetchRegisteredOccasion();\n\n    // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n  useEffect(() => {\n    const socket = io(Commons.siteURL, {\n      path: \"/socket.io\"\n    });\n    socket.on(\"updateEvent\", response => {\n      if (response !== undefined && Object.keys(response).length !== 0) {\n        if (response.occasionId && response.occasionId + \"\" === occasionId) {\n          fetchRegisteredOccasion();\n        }\n      }\n    });\n    socket.on(\"deleteEvent\", response => {\n      if (response !== undefined && Object.keys(response).length !== 0) {\n        if (response.occasionId && response.occasionId + \"\" === occasionId) {\n          history.goBack();\n        }\n      }\n    });\n    return () => {\n      socket.off(\"updateEvent\");\n      socket.off(\"deleteEvent\");\n      socket.disconnect();\n    };\n\n    // eslint-disable-next-line\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8 animate__animated animate__fadeIn\",\n      children: [/*#__PURE__*/_jsxDEV(_Row, {\n        gutter: [0, 0],\n        justify: \"center\",\n        children: /*#__PURE__*/_jsxDEV(_Col, {\n          xs: 24,\n          lg: 12,\n          xl: 8,\n          children: /*#__PURE__*/_jsxDEV(CustomSteps, {\n            type: \"navigation\",\n            size: \"small\",\n            direction: \"horizontal\",\n            responsive: false,\n            style: {\n              boxShadow: \"0px -1px 0 0 #e8e8e8 inset\"\n            },\n            current: 4,\n            children: [/*#__PURE__*/_jsxDEV(CustomStep, {\n              title: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs\",\n                children: \"Step 1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 24\n              }, this),\n              description: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm whitespace-pre-wrap\",\n                children: `検査方法\\n選択`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CustomStep, {\n              title: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs\",\n                children: \"Step 2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 24\n              }, this),\n              description: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm  whitespace-pre-wrap\",\n                children: `会場\\n選択`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CustomStep, {\n              title: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs\",\n                children: \"Step 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 24\n              }, this),\n              description: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm whitespace-pre-wrap\",\n                children: `受診日\\n選択`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CustomStep, {\n              title: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs\",\n                children: \"Step 4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 24\n              }, this),\n              description: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm whitespace-pre-wrap\",\n                children: `受診時間\\n選択`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CustomStep, {\n              title: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs\",\n                children: \"Step 5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 24\n              }, this),\n              description: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm whitespace-pre-wrap\",\n                children: `内容\\n確認`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Row, {\n        gutter: [0, 0],\n        justify: \"center\",\n        children: /*#__PURE__*/_jsxDEV(_Col, {\n          xs: 24,\n          lg: 12,\n          xl: 8,\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-bold text-gray-500\",\n            children: \"\\u5185\\u5BB9\\u78BA\\u8A8D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Badge.Ribbon, {\n            text: Commons.getTypeByValue(currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.type),\n            children: /*#__PURE__*/_jsxDEV(_Card, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"px-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500 mb-2\",\n                  children: \"\\u691C\\u67FB\\u5834\\u6240\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lg text-center font-bold\",\n                  children: `${(currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.title) || \"ー\"}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-center\",\n                  children: `〒${currentOccasion !== null && currentOccasion !== void 0 && currentOccasion.zipPostal ? Commons.insertCharacter(currentOccasion.zipPostal, 3, \"-\") : \"ー\"} ${(currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.address) || \"ー\"}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-center whitespace-pre-wrap\",\n                  children: `${(currentOccasion === null || currentOccasion === void 0 ? void 0 : currentOccasion.telephone) || \"ー\"}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500 mb-2\",\n                  children: \"\\u4E88\\u7D04\\u65E5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lg text-center font-bold\",\n                  children: moment(occurrenceDate, \"YYYY-MM-DD\").format(\"YYYY年M月D日\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500 mb-2\",\n                  children: \"\\u4E88\\u7D04\\u6642\\u9593\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-lg text-center font-bold\",\n                  children: moment(occurrenceTime, \"HH:mm\").format(\"HH時mm分\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(_Divider, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-center mb-4\",\n                  children: `予約内容をご確認の後、間違えがなければ下記の「予約確定」を押してください。`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-center\",\n                  children: /*#__PURE__*/_jsxDEV(_Checkbox, {\n                    className: \"text-xs\",\n                    checked: agreement,\n                    onChange: e => {\n                      setAgreement(e.target.checked);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                      href: Commons.PRIVACY_POLICY_URL,\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      className: \"underline text-primary\",\n                      children: \"\\u30D7\\u30E9\\u30A4\\u30D0\\u30B7\\u30FC\\u30DD\\u30EA\\u30B7\\u30FC\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 23\n                    }, this), \"\\u306B\\u540C\\u610F\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(_Row, {\n            gutter: [8, 0],\n            justify: \"center\",\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(_Col, {\n              children: /*#__PURE__*/_jsxDEV(_Button, {\n                size: \"large\",\n                className: \"px-8\",\n                shape: \"round\",\n                onClick: () => {\n                  history.goBack();\n                },\n                children: \"\\u623B\\u308B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(_Col, {\n              children: /*#__PURE__*/_jsxDEV(_Button, {\n                type: \"primary\",\n                size: \"large\",\n                shape: \"round\",\n                className: \"px-12\",\n                onClick: confirmHandler,\n                children: \"\\u4E88\\u7D04\\u78BA\\u5B9A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(OccurrenceConfirm, \"zIGn/4EGV1O/GcKzAheQlRfuBS0=\", false, function () {\n  return [Commons.useIsMountedRef];\n});\n_c3 = OccurrenceConfirm;\nexport default _c4 = withRouter(OccurrenceConfirm);\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"CustomSteps\");\n$RefreshReg$(_c2, \"CustomStep\");\n$RefreshReg$(_c3, \"OccurrenceConfirm\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","withRouter","moment","styled","io","Commons","jsxDEV","_jsxDEV","Fragment","_Fragment","locale","Step","_Steps","CustomSteps","_c","CustomStep","_c2","OccurrenceConfirm","props","_s","history","showLoadingPageSpin","hideLoadingPageSpin","auth","occasionId","occurrenceTime","occurrenceDate","occurrenceId","match","params","isMountedRef","useIsMountedRef","currentOccasion","setCurrentOccasion","agreement","setAgreement","fetchOccasion","axiosInstance","get","apiClientOccasions","then","response","data","catch","error","status","_message","warning","errorSessionMsg","push","GET_REDIRECT_LOGIN_ROUTE","errorSystemMsg","finally","fetchRegisteredOccasion","apiClientRegistrations","_response$data","length","clientRegisteredOccasionsRoute","confirmHandler","_currentOccasion$limi","_currentOccasion$limi2","_currentOccasion$limi3","limitTime","subtract","limitDays","hour","limitHours","minute","limitMinutes","second","isAfter","rParams","expected","parseInt","post","pathname","state","fromConfirm","_Modal","info","title","content","warnSameDayReserveMsg","okText","okButtonProps","shape","centered","onOk","go","warnNoAvailableSpaceMsg","goBack","warnRegistrationOverlapMsg","current","warnAgreementNotCheckedMsg","window","scrollTo","socket","siteURL","path","on","undefined","Object","keys","off","disconnect","children","className","_Row","gutter","justify","_Col","xs","lg","xl","type","size","direction","responsive","style","boxShadow","fileName","_jsxFileName","lineNumber","columnNumber","description","_Divider","_Badge","Ribbon","text","getTypeByValue","_Card","zipPostal","insertCharacter","address","telephone","format","_Checkbox","checked","onChange","e","target","href","PRIVACY_POLICY_URL","rel","_Button","onClick","_c3","_c4","$RefreshReg$"],"sources":["C:/Users/Spyder/Desktop/pcr-system-clone/frontend/src/views/Client/OccurrenceConfirm/OccurrenceConfirm.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\"\r\nimport { withRouter } from \"react-router-dom\"\r\nimport {\r\n  Col,\r\n  Divider,\r\n  message,\r\n  Row,\r\n  Steps,\r\n  Button,\r\n  Modal,\r\n  Checkbox,\r\n  Card,\r\n  Badge,\r\n} from \"antd\"\r\nimport moment from \"moment\"\r\nimport \"moment/locale/ja\"\r\nimport styled from \"styled-components\"\r\nimport io from \"socket.io-client\"\r\nimport * as Commons from \"common/common\"\r\n\r\nmoment.locale(\"ja\")\r\n\r\nconst { Step } = Steps\r\n\r\nconst CustomSteps = styled(Steps)`\r\n  .ant-steps-item-wait\r\n    > .ant-steps-item-container\r\n    > .ant-steps-item-content\r\n    > .ant-steps-item-title {\r\n    color: rgba(0, 0, 0, 0.2);\r\n  }\r\n  .ant-steps-item-wait\r\n    > .ant-steps-item-container\r\n    > .ant-steps-item-content\r\n    > .ant-steps-item-description {\r\n    color: rgba(0, 0, 0, 0.2);\r\n  }\r\n  .ant-steps-item-process\r\n    > .ant-steps-item-container\r\n    > .ant-steps-item-content\r\n    > .ant-steps-item-title {\r\n    color: #21acd7;\r\n    font-weight: bold;\r\n  }\r\n  .ant-steps-item-process\r\n    > .ant-steps-item-container\r\n    > .ant-steps-item-content\r\n    > .ant-steps-item-description {\r\n    color: #21acd7;\r\n    font-weight: bold;\r\n  }\r\n  .ant-steps-item-finish\r\n    > .ant-steps-item-container\r\n    > .ant-steps-item-content\r\n    > .ant-steps-item-title {\r\n    color: rgba(0, 0, 0, 0.6);\r\n    font-weight: bold;\r\n  }\r\n  .ant-steps-item-finish\r\n    > .ant-steps-item-container\r\n    > .ant-steps-item-content\r\n    > .ant-steps-item-description {\r\n    color: rgba(0, 0, 0, 0.6);\r\n    font-weight: bold;\r\n  }\r\n`\r\n\r\nconst CustomStep = styled(Step)`\r\n  &::after {\r\n    display: none !important;\r\n  }\r\n  .ant-steps-item-icon {\r\n    display: none !important;\r\n  }\r\n`\r\n\r\nconst OccurrenceConfirm = (props) => {\r\n  const { history, showLoadingPageSpin, hideLoadingPageSpin, auth } = props\r\n  const { occasionId, occurrenceTime, occurrenceDate, occurrenceId } =\r\n    props.match.params\r\n  const isMountedRef = Commons.useIsMountedRef()\r\n\r\n  const [currentOccasion, setCurrentOccasion] = useState({})\r\n  const [agreement, setAgreement] = useState(false)\r\n\r\n  const fetchOccasion = useCallback(() => {\r\n    showLoadingPageSpin()\r\n\r\n    Commons.axiosInstance\r\n      .get(`${Commons.apiClientOccasions}/${occasionId}/details`)\r\n      .then((response) => {\r\n        setCurrentOccasion(response?.data || {})\r\n      })\r\n      .catch((error) => {\r\n        if (error.response.status === 403) {\r\n          message.warning(Commons.errorSessionMsg)\r\n          history.push(Commons.GET_REDIRECT_LOGIN_ROUTE(auth))\r\n        } else if (error.response.status === 500) {\r\n          message.error(Commons.errorSystemMsg)\r\n        } else {\r\n          message.error(Commons.errorSystemMsg)\r\n        }\r\n      })\r\n      .finally(() => {\r\n        hideLoadingPageSpin()\r\n      })\r\n  }, [showLoadingPageSpin, hideLoadingPageSpin, history, auth, occasionId])\r\n\r\n  const fetchRegisteredOccasion = useCallback(() => {\r\n    showLoadingPageSpin()\r\n\r\n    Commons.axiosInstance\r\n      .get(Commons.apiClientRegistrations)\r\n      .then((response) => {\r\n        if (response?.data?.length >= 2) {\r\n          history.push(`${Commons.clientRegisteredOccasionsRoute}`)\r\n        } else {\r\n          fetchOccasion()\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (error.response.status === 403) {\r\n          message.warning(Commons.errorSessionMsg)\r\n          history.push(Commons.GET_REDIRECT_LOGIN_ROUTE(auth))\r\n        } else if (error.response.status === 500) {\r\n          message.error(Commons.errorSystemMsg)\r\n        } else {\r\n          message.error(Commons.errorSystemMsg)\r\n        }\r\n      })\r\n      .finally(() => {\r\n        hideLoadingPageSpin()\r\n      })\r\n\r\n    // eslint-disable-next-line\r\n  }, [showLoadingPageSpin, hideLoadingPageSpin, history, auth])\r\n\r\n  const confirmHandler = () => {\r\n    if (\r\n      currentOccasion?.limitTime\r\n        ? moment(occurrenceDate)\r\n            .subtract(currentOccasion?.limitDays ?? 1, \"day\")\r\n            .hour(currentOccasion?.limitHours ?? 18)\r\n            .minute(currentOccasion?.limitMinutes ?? 0)\r\n            .second(0)\r\n            .isAfter(moment())\r\n        : true\r\n    ) {\r\n      if (agreement) {\r\n        showLoadingPageSpin()\r\n\r\n        const rParams = {\r\n          expected: 1,\r\n          occurrenceId: parseInt(occurrenceId),\r\n        }\r\n\r\n        Commons.axiosInstance\r\n          .post(Commons.apiClientOccasions, rParams)\r\n          .then((response) => {\r\n            history.push({\r\n              pathname: `${Commons.clientRegisteredOccasionsRoute}`,\r\n              state: { fromConfirm: true },\r\n            })\r\n          })\r\n          .catch((error) => {\r\n            if (error.response.status === 400) {\r\n              Modal.info({\r\n                title: \"確認\",\r\n                content: Commons.warnSameDayReserveMsg,\r\n                okText: \"確認\",\r\n                okButtonProps: { shape: \"round\" },\r\n                centered: true,\r\n                onOk() {\r\n                  history.go(-2)\r\n                },\r\n              })\r\n            } else if (error.response.status === 406) {\r\n              Modal.info({\r\n                title: \"確認\",\r\n                content: Commons.warnNoAvailableSpaceMsg,\r\n                okText: \"確認\",\r\n                okButtonProps: { shape: \"round\" },\r\n                centered: true,\r\n                onOk() {\r\n                  history.goBack()\r\n                },\r\n              })\r\n            } else if (error.response.status === 409) {\r\n              Modal.info({\r\n                title: \"確認\",\r\n                content: Commons.warnRegistrationOverlapMsg,\r\n                okText: \"確認\",\r\n                okButtonProps: { shape: \"round\" },\r\n                centered: true,\r\n              })\r\n            } else if (error.response.status === 500) {\r\n              message.error(Commons.errorSystemMsg)\r\n            }\r\n          })\r\n          .finally(() => {\r\n            if (isMountedRef.current) {\r\n              hideLoadingPageSpin()\r\n            }\r\n          })\r\n      } else {\r\n        Modal.info({\r\n          title: \"確認\",\r\n          okText: \"確認\",\r\n          okButtonProps: { shape: \"round\" },\r\n          centered: true,\r\n          content: Commons.warnAgreementNotCheckedMsg,\r\n        })\r\n      }\r\n    } else {\r\n      Modal.info({\r\n        title: \"確認\",\r\n        content: Commons.warnNoAvailableSpaceMsg,\r\n        okText: \"確認\",\r\n        okButtonProps: { shape: \"round\" },\r\n        centered: true,\r\n        onOk() {\r\n          history.goBack()\r\n        },\r\n      })\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchRegisteredOccasion()\r\n\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const socket = io(Commons.siteURL, { path: \"/socket.io\" })\r\n\r\n    socket.on(\"updateEvent\", (response) => {\r\n      if (response !== undefined && Object.keys(response).length !== 0) {\r\n        if (response.occasionId && response.occasionId + \"\" === occasionId) {\r\n          fetchRegisteredOccasion()\r\n        }\r\n      }\r\n    })\r\n\r\n    socket.on(\"deleteEvent\", (response) => {\r\n      if (response !== undefined && Object.keys(response).length !== 0) {\r\n        if (response.occasionId && response.occasionId + \"\" === occasionId) {\r\n          history.goBack()\r\n        }\r\n      }\r\n    })\r\n\r\n    return () => {\r\n      socket.off(\"updateEvent\")\r\n      socket.off(\"deleteEvent\")\r\n\r\n      socket.disconnect()\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n      <div className=\"mb-8 animate__animated animate__fadeIn\">\r\n        <Row gutter={[0, 0]} justify=\"center\">\r\n          <Col xs={24} lg={12} xl={8}>\r\n            <CustomSteps\r\n              type=\"navigation\"\r\n              size=\"small\"\r\n              direction=\"horizontal\"\r\n              responsive={false}\r\n              style={{\r\n                boxShadow: \"0px -1px 0 0 #e8e8e8 inset\",\r\n              }}\r\n              current={4}\r\n            >\r\n              <CustomStep\r\n                title={<span className=\"text-xs\">Step 1</span>}\r\n                description={\r\n                  <span className=\"text-sm whitespace-pre-wrap\">{`検査方法\\n選択`}</span>\r\n                }\r\n              />\r\n              <CustomStep\r\n                title={<span className=\"text-xs\">Step 2</span>}\r\n                description={\r\n                  <span className=\"text-sm  whitespace-pre-wrap\">{`会場\\n選択`}</span>\r\n                }\r\n              />\r\n              <CustomStep\r\n                title={<span className=\"text-xs\">Step 3</span>}\r\n                description={\r\n                  <span className=\"text-sm whitespace-pre-wrap\">{`受診日\\n選択`}</span>\r\n                }\r\n              />\r\n              <CustomStep\r\n                title={<span className=\"text-xs\">Step 4</span>}\r\n                description={\r\n                  <span className=\"text-sm whitespace-pre-wrap\">{`受診時間\\n選択`}</span>\r\n                }\r\n              />\r\n              <CustomStep\r\n                title={<span className=\"text-xs\">Step 5</span>}\r\n                description={\r\n                  <span className=\"text-sm whitespace-pre-wrap\">{`内容\\n確認`}</span>\r\n                }\r\n              />\r\n            </CustomSteps>\r\n          </Col>\r\n        </Row>\r\n        <Row gutter={[0, 0]} justify=\"center\">\r\n          <Col xs={24} lg={12} xl={8} className=\"mt-8\">\r\n            <p className=\"text-lg font-bold text-gray-500\">内容確認</p>\r\n            <Divider />\r\n            <Badge.Ribbon text={Commons.getTypeByValue(currentOccasion?.type)}>\r\n              <Card>\r\n                <div className=\"px-4\">\r\n                  <p className=\"text-sm text-gray-500 mb-2\">検査場所</p>\r\n                  <p className=\"text-lg text-center font-bold\">{`${\r\n                    currentOccasion?.title || \"ー\"\r\n                  }`}</p>\r\n                  <p className=\"text-sm text-center\">{`〒${\r\n                    currentOccasion?.zipPostal\r\n                      ? Commons.insertCharacter(\r\n                          currentOccasion.zipPostal,\r\n                          3,\r\n                          \"-\"\r\n                        )\r\n                      : \"ー\"\r\n                  } ${currentOccasion?.address || \"ー\"}`}</p>\r\n                  <p className=\"text-sm text-center whitespace-pre-wrap\">{`${\r\n                    currentOccasion?.telephone || \"ー\"\r\n                  }`}</p>\r\n                  <Divider />\r\n                  <p className=\"text-sm text-gray-500 mb-2\">予約日</p>\r\n                  <p className=\"text-lg text-center font-bold\">\r\n                    {moment(occurrenceDate, \"YYYY-MM-DD\").format(\r\n                      \"YYYY年M月D日\"\r\n                    )}\r\n                  </p>\r\n                  <Divider />\r\n                  <p className=\"text-sm text-gray-500 mb-2\">予約時間</p>\r\n                  <p className=\"text-lg text-center font-bold\">\r\n                    {moment(occurrenceTime, \"HH:mm\").format(\"HH時mm分\")}\r\n                  </p>\r\n                  <Divider />\r\n                  <p className=\"text-center mb-4\">{`予約内容をご確認の後、間違えがなければ下記の「予約確定」を押してください。`}</p>\r\n                  <div className=\"text-center\">\r\n                    <Checkbox\r\n                      className=\"text-xs\"\r\n                      checked={agreement}\r\n                      onChange={(e) => {\r\n                        setAgreement(e.target.checked)\r\n                      }}\r\n                    >\r\n                      <a\r\n                        href={Commons.PRIVACY_POLICY_URL}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"underline text-primary\"\r\n                      >\r\n                        プライバシーポリシー\r\n                      </a>\r\n                      に同意\r\n                    </Checkbox>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </Badge.Ribbon>\r\n            <Divider />\r\n            <Row gutter={[8, 0]} justify=\"center\" className=\"mb-4\">\r\n              <Col>\r\n                <Button\r\n                  size=\"large\"\r\n                  className=\"px-8\"\r\n                  shape=\"round\"\r\n                  onClick={() => {\r\n                    history.goBack()\r\n                  }}\r\n                >\r\n                  戻る\r\n                </Button>\r\n              </Col>\r\n              <Col>\r\n                <Button\r\n                  type=\"primary\"\r\n                  size=\"large\"\r\n                  shape=\"round\"\r\n                  className=\"px-12\"\r\n                  onClick={confirmHandler}\r\n                >\r\n                  予約確定\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default withRouter(OccurrenceConfirm)\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}